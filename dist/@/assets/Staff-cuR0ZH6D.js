import{r as g,S,j as e,f as l,A as y,i as v}from"./index-eCljlgW-.js";import{k as F,u as I,i as R,g as k}from"./Layout-CLuA73Dq.js";import{u as D}from"./useAsync-BLnx-5gf.js";import{u as E}from"./useFilter-ChDoaq5n.js";import{u as P,M as T}from"./DrawerButton-tXa7dQCi.js";import{A as M,S as C}from"./AccessListModal-BMZNovlH.js";import{T as B}from"./TableLoading-DCqgu7qm.js";import{S as O}from"./Status-BL8dMBon.js";import{T as U}from"./Tooltip-6CKMISal.js";import{D as L}from"./DeleteModal-BMrh0Yv2.js";import{E as V}from"./EditDeleteButton--X3X8gaA.js";import{a as _}from"./index.prod-DLjbbcrz.js";import{A as N}from"./AdminServices-T6vH5A2p.js";import{a as w,n as z}from"./toast-B6PEetj3.js";import{N as G}from"./NotFound-Sn3b-FT4.js";import{P as H}from"./PageTitle-Dv34tRwz.js";import{A as J}from"./AnimatedContent-uA-MGJA2.js";import"./iconBase-C8O02EAZ.js";import"./ProductServices-DyjR-0YH.js";import"./index-DF7ydXMC.js";import"./useDisableForDemo-3Yn1Itnm.js";import"./CouponServices-ClgVJs1S.js";import"./CurrencyServices-Cv5sLHdT.js";import"./SelectLanguageTwo-CALhjDS1.js";import"./spinner-CkndCogW.js";import"./index-D3xxFJjS.js";import"./index.esm-Z-EGr4Ry.js";import"./InputArea-CpsUikjn.js";import"./useStaffSubmit-B1DyZRIA.js";import"./useTranslationValue-Bzejfx2N.js";import"./SelectRole-Co__61Iz.js";import"./LabelArea-CKGaWpTG.js";import"./Uploader-DGGggdPK.js";import"./_commonjs-dynamic-modules-LM44EJN2.js";import"./react-tooltip.min-BQYePIUb.js";const Z=({id:n,status:x,option:j,staff:h})=>{const{setIsUpdate:p}=g.useContext(S),{role:o}=F(),d=async(c,u)=>{var i,m;if(!(o==="Super Admin"||o==="Admin"))return w("Only Super Admin and Admin can enable/disable any staff!");try{let a;x==="Active"?a="Inactive":a="Active";const r=await N.updateStaffStatus(c,{status:a});p(!0),z(r.message);return}catch(a){w(a?(m=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:m.message:a==null?void 0:a.message)}};return e.jsx(e.Fragment,{children:e.jsx(_,{onChange:()=>d(n),checked:x==="Active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},q=({staffs:n,lang:x})=>{const{title:j,serviceId:h,handleModalOpen:p,handleUpdate:o,isSubmitting:d,handleResetPassword:c}=P();console.log(n);const{showDateFormat:u,showingTranslateValue:i}=I(),[m,a]=g.useState(null),[r,b]=g.useState(!1),f=s=>{a(s),b(!0)},t=()=>{a(null),b(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(L,{id:h,title:j}),r&&e.jsx(M,{staff:m,isOpen:r,onClose:t,showingTranslateValue:i}),e.jsx(T,{children:e.jsx(C,{id:h})}),e.jsx(l.TableBody,{children:n==null?void 0:n.map(s=>e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:s.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:i(s==null?void 0:s.name)})})]})}),e.jsxs(l.TableCell,{children:[e.jsx("span",{className:"text-sm",children:s.email})," "]}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm ",children:s.phone})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm",children:u(s.joiningData)})}),e.jsx(l.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:s==null?void 0:s.role})}),e.jsx(l.TableCell,{className:"text-center text-xs",children:e.jsx(O,{status:s.status})}),e.jsx(l.TableCell,{className:"text-center",children:e.jsx(Z,{id:s==null?void 0:s._id,staff:s,option:"staff",status:s.status})}),e.jsx(l.TableCell,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>f(s),className:"text-gray-400",children:e.jsx(U,{id:"view",Icon:R,title:"View Access Route",bgColor:"#059669"})}),e.jsx(V,{id:s._id,staff:s,isSubmitting:d,handleUpdate:o,handleModalOpen:p,handleResetPassword:c,title:i(s==null?void 0:s.name)})]})})]},s._id))})]})},Ie=()=>{const{state:n}=g.useContext(y),{adminInfo:x}=n,{toggleDrawer:j,lang:h}=g.useContext(S),{data:p,loading:o,error:d}=D(()=>N.getAllStaff({email:x.email})),{userRef:c,setRole:u,totalResults:i,resultsPerPage:m,dataTable:a,serviceData:r,handleChangePage:b,handleSubmitUser:f}=E(p),{t}=v(),s=()=>{u(""),c.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[t("StaffPageTitle")," "]}),e.jsx(T,{children:e.jsx(C,{})}),e.jsx(J,{children:e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(l.CardBody,{children:e.jsxs("form",{onSubmit:f,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(l.Input,{ref:c,type:"search",name:"search",placeholder:t("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(l.Select,{onChange:A=>u(A.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:t("StaffRole")}),e.jsx("option",{value:"Admin",children:t("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:t("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:t("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(l.Button,{onClick:j,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(k,{})}),t("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(l.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full",children:e.jsx(l.Button,{layout:"outline",onClick:s,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})})}),o?e.jsx(B,{row:12,col:7,width:163,height:20}):d?e.jsx("span",{className:"text-center mx-auto text-red-500",children:d}):(r==null?void 0:r.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:t("StaffNameTbl")}),e.jsx(l.TableCell,{children:t("StaffEmailTbl")}),e.jsx(l.TableCell,{children:t("StaffContactTbl")}),e.jsx(l.TableCell,{children:t("StaffJoiningDateTbl")}),e.jsx(l.TableCell,{children:t("StaffRoleTbl")}),e.jsx(l.TableCell,{className:"text-center",children:t("OderStatusTbl")}),e.jsx(l.TableCell,{className:"text-center",children:t("PublishedTbl")}),e.jsx(l.TableCell,{className:"text-center",children:t("StaffActionsTbl")})]})}),e.jsx(q,{staffs:a,lang:h})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:i,resultsPerPage:m,onChange:b,label:"Table navigation"})})]}):e.jsx(G,{title:"Sorry, There are no staff right now."})]})};export{Ie as default};
