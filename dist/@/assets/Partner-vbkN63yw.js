import{r as i,j as e,f as s,Q as w,A as _,S as E,i as I}from"./index-eCljlgW-.js";import{u as U}from"./useAsync-BLnx-5gf.js";import{u as L}from"./useFilter-ChDoaq5n.js";import{u as k,M as P}from"./DrawerButton-tXa7dQCi.js";import{A as B,S as y}from"./AccessListModal-BMZNovlH.js";import{T as G}from"./TableLoading-DCqgu7qm.js";import{u as Q}from"./Layout-CLuA73Dq.js";import"./react-tooltip.min-BQYePIUb.js";import{D as V}from"./DeleteModal-BMrh0Yv2.js";import"./index.prod-DLjbbcrz.js";import{A as R}from"./AdminServices-T6vH5A2p.js";import"./toast-B6PEetj3.js";import{N as q}from"./NotFound-Sn3b-FT4.js";import{P as z}from"./PageTitle-Dv34tRwz.js";import"./ProductServices-DyjR-0YH.js";import"./index-DF7ydXMC.js";import"./useDisableForDemo-3Yn1Itnm.js";import"./CouponServices-ClgVJs1S.js";import"./CurrencyServices-Cv5sLHdT.js";import"./SelectLanguageTwo-CALhjDS1.js";import"./spinner-CkndCogW.js";import"./index-D3xxFJjS.js";import"./index.esm-Z-EGr4Ry.js";import"./InputArea-CpsUikjn.js";import"./useStaffSubmit-B1DyZRIA.js";import"./useTranslationValue-Bzejfx2N.js";import"./SelectRole-Co__61Iz.js";import"./LabelArea-CKGaWpTG.js";import"./Uploader-DGGggdPK.js";import"./_commonjs-dynamic-modules-LM44EJN2.js";import"./iconBase-C8O02EAZ.js";const J=({staffs:t,lang:u})=>{const{title:b,serviceId:c,handleModalOpen:T,handleUpdate:g,isSubmitting:m,handleResetPassword:v}=k();console.log(t);const{showDateFormat:M,showingTranslateValue:x}=Q(),[h,d]=i.useState(null),[r,p]=i.useState(!1),C=()=>{d(null),p(!1)},[D,j]=i.useState({});i.useEffect(()=>{const l=t.reduce((a,o)=>({...a,[o._id]:o.status||"Hold"}),{});j(l)},[t]);const F=async(l,a)=>{var S,N;const o=l.target.value;j(n=>({...n,[a]:o}));try{await R.updateStorePartnerStatus(a,{status:o}),w.success("Status updated successfully")}catch(n){console.error(n),w.error((N=(S=n==null?void 0:n.response)==null?void 0:S.data)==null?void 0:N.message),j(H=>{var A;return{...H,[a]:((A=t.find(O=>O._id===a))==null?void 0:A.status)||"Hold"}})}};return e.jsxs(e.Fragment,{children:[e.jsx(V,{id:c,title:b}),r&&e.jsx(B,{staff:h,isOpen:r,onClose:C,showingTranslateValue:x}),e.jsx(P,{children:e.jsx(y,{id:c})}),e.jsx(s.TableBody,{children:t==null?void 0:t.map(l=>e.jsxs(s.TableRow,{children:[e.jsxs(s.TableCell,{children:[e.jsx("span",{className:"text-sm",children:l.name})," "]}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.email})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.mobile})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.city})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.state})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.pinCode})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.pan})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.aadhar})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.gst})}),e.jsx(s.TableCell,{children:e.jsxs("select",{className:"px-2 py-1 rounded-md bg-white text-black",value:D[l._id],id:"",onChange:a=>{F(a,l._id)},children:[e.jsx("option",{value:"Accepted",children:"Active"}),e.jsx("option",{value:"Hold",children:"Hold"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]},l._id))})]})},we=()=>{const{state:t}=i.useContext(_),{adminInfo:u}=t,{toggleDrawer:b,lang:c}=i.useContext(E),{data:T,loading:g,error:m}=U(()=>R.getAllPartners({email:u.email})),{userRef:v,setRole:M,totalResults:x,resultsPerPage:h,dataTable:d,serviceData:r,handleChangePage:p,handleSubmitUser:C}=L(T);return I(),console.log(d),e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:["Our Partners"," "]}),e.jsx(P,{children:e.jsx(y,{})}),g?e.jsx(G,{row:12,col:7,width:163,height:20}):m?e.jsx("span",{className:"text-center mx-auto text-red-500",children:m}):(r==null?void 0:r.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:"name"}),e.jsx(s.TableCell,{children:"email"}),e.jsx(s.TableCell,{children:"mobile"}),e.jsx(s.TableCell,{children:"city"}),e.jsx(s.TableCell,{children:"state"}),e.jsx(s.TableCell,{className:"text-center",children:"Pincode"}),e.jsx(s.TableCell,{className:"text-center",children:"PAN"}),e.jsx(s.TableCell,{className:"text-center",children:"AADHAR"}),e.jsx(s.TableCell,{className:"text-center",children:"GST"}),e.jsx(s.TableCell,{className:"text-center",children:"Status"})]})}),e.jsx(J,{staffs:d,lang:c})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:x,resultsPerPage:h,onChange:p,label:"Table navigation"})})]}):e.jsx(q,{title:"Sorry, There are no staff right now."})]})};export{we as default};
